@model RoomBookingSysytem1.Models.SignupModel

@{
    ViewBag.Title = "Signup";
}

<body style="background-image: url('../../content/images/c101.jpg'); background-size: cover;">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h1 class="card-title text-center">Sign up to CRBS</h1>
                    </div>
                    <div class="card-body">
                        @using (Html.BeginForm("Signup", "Account", FormMethod.Post, new { @class = "form-horizontal" }))
                        {
                            @Html.AntiForgeryToken()
                            <div class="form-group">
                                <label class="control-label">First Name</label>
                                @Html.TextBoxFor(m => m.FirstName, new { @class = "form-control", @placeholder = "First Name" })
                                @Html.ValidationMessageFor(m => m.FirstName, "", new { @class = "text-danger" })
                            </div>
                            <div class="form-group">
                                <label class="control-label">Last Name</label>
                                @Html.TextBoxFor(m => m.LastName, new { @class = "form-control", @placeholder = "Last Name" })
                                @Html.ValidationMessageFor(m => m.LastName, "", new { @class = "text-danger" })
                            </div>
                            <div class="form-group">
                                <label class="control-label">Date of Birth</label>
                                @Html.TextBoxFor(m => m.DateOfBirth, "{0:MM/dd/yyyy}", new { @class = "form-control datepicker", @placeholder = "MM/DD/YYYY" })
                                @Html.ValidationMessageFor(m => m.DateOfBirth, "", new { @class = "text-danger" })
                            </div>
                            <div class="form-group">
                                <label class="control-label">Gender</label>
                                <select class="form-control" id="Gender" name="Gender">
                                    <option value="">Select Gender</option>
                                    <option value="Male" @(Model != null && Model.Gender == "Male" ? "selected" : "")>Male</option>
                                    <option value="Female" @(Model != null && Model.Gender == "Female" ? "selected" : "")>Female</option>
                                    <option value="Other" @(Model != null && Model.Gender == "Other" ? "selected" : "")>Other</option>
                                </select>
                                @Html.ValidationMessageFor(m => m.Gender, "", new { @class = "text-danger" })
                            </div>
                            <div class="form-group">
                                <label class="control-label">Phone Number</label>
                                @Html.TextBoxFor(m => m.PhoneNumber, new { @class = "form-control", @placeholder = "Phone Number" })
                                @Html.ValidationMessageFor(m => m.PhoneNumber, "", new { @class = "text-danger" })
                            </div>
                            <div class="form-group">
                                <label class="control-label">Email Address</label>
                                @Html.TextBoxFor(m => m.Email, new { @class = "form-control", @placeholder = "Email Address" })
                                @Html.ValidationMessageFor(m => m.Email, "", new { @class = "text-danger" })
                            </div>
                            <div class="form-group">
                                <label class="control-label">Address</label>
                                @Html.TextBoxFor(m => m.Address, new { @class = "form-control", @placeholder = "Address" })
                                @Html.ValidationMessageFor(m => m.Address, "", new { @class = "text-danger" })
                            </div>
                            <div class="form-group">
                                @Html.LabelFor(m => m.State, new { @class = "control-label" })
                                @Html.DropDownListFor(m => m.State, new SelectList(ViewBag.States, "Value", "Text"), "Select a state", new { @class = "form-control", @id = "state-dropdown" })
                                @Html.ValidationMessageFor(m => m.State, "", new { @class = "text-danger" })
                            </div>
                            <div class="form-group">
                                @Html.LabelFor(m => m.City, new { @class = "control-label" })
                                @Html.DropDownListFor(m => m.City, new SelectList(new List<string>()), "Select a city", new { @class = "form-control", @id = "city-dropdown" })
                                @Html.ValidationMessageFor(m => m.City, "", new { @class = "text-danger" })
                            </div>
                            <div class="form-group">
                                <label class="control-label">Username</label>
                                @Html.TextBoxFor(m => m.Username, new { @class = "form-control", @placeholder = "Username" })
                                @Html.ValidationMessageFor(m => m.Username, "", new { @class = "text-danger" })
                            </div>
                            <div class="form-group">
                                <label class="control-label">Password</label>
                                @Html.PasswordFor(m => m.Password, new { @class = "form-control", @placeholder = "Password" })
                                @Html.ValidationMessageFor(m => m.Password, "", new { @class = "text-danger" })
                            </div>
                            <div class="form-group">
                                <label class="control-label">Confirm Password</label>
                                @Html.PasswordFor(m => m.ConfirmPassword, new { @class = "form-control", @placeholder = "Confirm Password" })
                                @Html.ValidationMessageFor(m => m.ConfirmPassword, "", new { @class = "text-danger" })
                            </div>
                            <div class="form-group">
                                <button type="submit" class="btn btn-primary btn-block">Sign up</button>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>
@section Scripts{
    <script>
        $(document).ready(function () {
            $("#state-dropdown").change(function () {
                    var stateId = $(this).val();
                    $.ajax({
                        url: "@Url.Action("GetCities", "Signup")",
                        type: "GET",
                        data: { stateId: stateId },
                        dataType: "json",
                        success: function (response) {
                            $("#city-dropdown").empty();
                            $("#city-dropdown").append("<option value=''>Select a city</option>");
                            $.each(response, function (i, city) {
                                $("#city-dropdown").append("<option value='" + city.Value + "'>" + city.Text + "</option>");
                            });
                        }
                    });
            });
        });
    </script>
}
